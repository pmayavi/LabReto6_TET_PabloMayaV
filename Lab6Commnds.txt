
Para instalar el AWS CLI use el comando
sh'''
msiexec.exe /i https://awscli.amazonaws.com/AWSCLIV2.msi
'''
Tomado de https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html

crear carpeta, archivos y poner credenciales fotos
[default]
aws_access_key_id=ASIAYDODJ6JPG3HNEQAX
aws_secret_access_key=Q5xnYpygfEKPK5nc7CysbPk/gFkPZpd1Rx6lsEQo
aws_session_token=FwoGZXIvYXdzELD//////////wEaDLzZrxeTwKbimc8aWiLEASo064kgq8COyqQvCHmDOUhvlzAq3DSbuCIhpiUkQlRztSpcu6UzElTBgZ3l9TZQbNcJ7G5bFWvFE3C0Dd9aApvVi6O0vannOtMUytqZJ8kP19fleGmRQyLS5RxJ+6lYCSfuWTRo7WcyTA8wXhpl/FUH3yIM2wfgIZaSLU5TLk/+yRfRHfsMxz92mp48BbkRbU3WvkAc6dhkP3v46j8tpID+7mzsKlcWGtLK2SU1xqEg13kY+lEs21KU7lvSKQhE5HTTv04o4oHoowYyLc/T16M2nGpCYhIO7dlsv2vGLrh/KHgXk638nMltmr0ojSzSCuQs/3W01jYM+w==

creacion de la cluster con las especificaciones dadas
aws emr create-cluster --release-label emr-6.10.0 --instance-type m4.large --instance-count 3 --log-uri s3://pmayav-lab-emr/logs --use-default-roles --ec2-attributes KeyName=emr-key,SubnetId=subnet-01fd4a313d0de3645 --no-termination-protected

conexion con la main 
ssh -i emr-key.pem hadoop@ec2-44-192-253-171.compute-1.amazonaws.com

instalacion de requerimientos
sudo yum install python3-pip &&/
sudo pip3 install mrjob &&/
sudo yum install git -y

clonar el repo
git clone https://github.com/pmayavi/LabReto6_TET_PabloMayaV.git
cd LabReto6_TET_PabloMayaV/wordcount

prueba del codigo
python wordcount-mr.py /home/hadoop/LabReto6_TET_PabloMayaV/datasets/gutenberg-small/*.txt

creacion de usuario admin y copiar el dataset al usuario
hdfs dfs -mkdir /user/admin/
hdfs dfs -copyFromLocal /home/hadoop/LabReto6_TET_PabloMayaV/datasets/ /user/admin/


python wordcount-mr.py hdfs:///user/admin/datasets/gutenberg-small/*.txt -r hadoop --output-dir hdfs:///user/admin/output1
hdfs dfs -ls -r /user/admin/output1/